"use strict";(self.webpackChunkfeel_scala=self.webpackChunkfeel_scala||[]).push([[2695],{4863:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(7462),l=n(7294),r=n(5671),o=n(3746);const s=e=>{let{children:t,onChange:n,language:s}=e;const i=(0,l.useRef)(null),[c,u]=(0,l.useState)(t),p=(0,l.useCallback)((e=>{const t=e.slice(0,-1);u(t),n(t)}),[]);return(0,r.Y)(i,p,{indentation:2}),l.createElement(o.ZP,(0,a.Z)({},o.lG,{code:c,language:s}),(e=>{let{className:t,style:n,tokens:a,getTokenProps:r}=e;return l.createElement("pre",{className:t,style:n,ref:i},a.map(((e,t)=>l.createElement(l.Fragment,{key:t},e.filter((e=>!e.empty)).map(((e,t)=>l.createElement("span",r({token:e,key:t})))),"\n"))))}))}},4294:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(7294),l=n(9669),r=n.n(l),o=n(4863),s=n(9286),i=n(2389);const c=e=>{let{defaultExpression:t,feelContext:n,metadata:l,onResultCallback:c,onErrorCallback:u}=e;const p=function(){let e={};if((0,i.Z)()){const t=window.location.search,n=new URLSearchParams(t);n.has("expression")&&(e.expression=N(n.get("expression"))),n.has("context")&&(e.context=N(n.get("context")))}return e}();let d=p.context??n;d&&(d=JSON.stringify(JSON.parse(d),null,2));const[h,m]=a.useState(p.expression??t),[g,f]=a.useState(d),[x,k]=a.useState("<click 'Evaluate' to see the result of the expression>"),[v,E]=a.useState(null),[b,y]=a.useState(null),C=/^.+(?<line>\d+):(?<position>\d+).+$/gm,w=/^.+at position (?<position>\d+)$/gm;function S(e,t){k(null),E(e),y(t),u&&u(e)}function Z(e){return btoa(e)}function N(e){return atob(e)}return a.createElement("div",null,a.createElement("h2",null,"Expression"),a.createElement(o.Z,{onChange:m,language:"js"},h),n&&a.createElement("div",null,a.createElement("h2",null,"Context"),a.createElement("i",null,"A JSON document that is used to resolve ",a.createElement("strong",null,"variables")," ","in the expression."),a.createElement(o.Z,{onChange:f,language:"json"},g)),a.createElement("button",{onClick:function(){try{k("<evaluating the expression...>"),y(null);!function(e){r().post("https://feel.upgradingdave.com/api/v1/feel/evaluate",{expression:h,context:e,metadata:{...l}},{headers:{accept:"*/*","content-type":"application/json"}}).then((e=>{var t;if(null!=e&&null!=(t=e.data)&&t.error){var n,a;const t=e.data.error,l=C.exec(t);S({message:t,line:null==l||null==(n=l.groups)?void 0:n.line,position:null==l||null==(a=l.groups)?void 0:a.position},e.data.warnings)}else!function(e){E(null);const t=JSON.stringify(e.result);k(t),e.warnings.length>=1&&y(e.warnings);c&&c(t)}(e.data)}))}(n&&0!==g.trim().length?JSON.parse(g):{})}catch(t){var e;const n=w.exec(t.message);S({message:`failed to parse context: ${t.message}`,position:null==n||null==(e=n.groups)?void 0:e.position})}},className:"button button--primary button--lg"},"Evaluate"),a.createElement("button",{onClick:function(){navigator.clipboard.writeText(function(){const e=window.location.href.split("?")[0],t=window.location.search,n=new URLSearchParams(t);return n.set("expression",Z(h)),g&&n.set("context",Z(g)),n.set("expression-type","expression"),e+"?"+n}())},className:"button button--secondary button--lg",title:"Copy an URL to the clipboard for sharing the expression",style:{"margin-left":"10px"}},"Share"),a.createElement("br",null),a.createElement("br",null),a.createElement("h2",null,"Result"),a.createElement(s.Z,{title:(()=>{const e=null!=v&&v.line?` on line ${v.line}`:"",t=null!=v&&v.position?` at position ${v.position}`:"";return v&&`Error${e}${t}`})(),language:"json"},x||(null==v?void 0:v.message)),a.createElement("br",null),a.createElement("h2",null,"Warnings"),a.createElement(s.Z,null,(null==b?void 0:b.map(((e,t)=>a.createElement("li",{key:t},"[",e.type,"] ",e.message))))||"<none>"))}},4455:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>c,default:()=>m,frontMatter:()=>i,metadata:()=>u,toc:()=>d});var a=n(7462),l=(n(7294),n(3905)),r=n(4294),o=n(6518),s=n.n(o);const i={id:"chapter-5",title:"Chapter 5"},c=void 0,u={unversionedId:"learn/challenge/chapter-5",id:"learn/challenge/chapter-5",title:"Chapter 5",description:"The next stop would put Zee in Cologne, as the journey continued there was an important",source:"@site/docs/learn/challenge/chapter-5.mdx",sourceDirName:"learn/challenge",slug:"/learn/challenge/chapter-5",permalink:"/feel-scala/docs/next/learn/challenge/chapter-5",draft:!1,editUrl:"https://github.com/camunda/feel-scala/edit/main/docs/docs/learn/challenge/chapter-5.mdx",tags:[],version:"current",frontMatter:{id:"chapter-5",title:"Chapter 5"},sidebar:"Learn",previous:{title:"Chapter 4",permalink:"/feel-scala/docs/next/learn/challenge/chapter-4"},next:{title:"Chapter 6",permalink:"/feel-scala/docs/next/learn/challenge/chapter-6"}},p={},d=[],h={toc:d};function m(e){let{components:t,...n}=e;return(0,l.kt)("wrapper",(0,a.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"The next stop would put Zee in Cologne \ud83c\udde9\ud83c\uddea, as the journey continued there was an important\nquestion to answer: would Zee get in time for the conference? \u231a"),(0,l.kt)("p",null,"The trip started on September 15th, 2022, and since the journey began, around 200 hours had passed.\nCamundaCon will start on October 5th, 2022."),(0,l.kt)("p",null,"Let's use ",(0,l.kt)("a",{parentName:"p",href:"https://docs.camunda.io/docs/components/modeler/feel/language-guide/feel-temporal-expressions/"},"temporal operators")," to check\nhow many days Zee has left:"),(0,l.kt)(r.Z,{defaultExpression:s()`
    // use temporal math to calculate the remaining days
    date(startingDate) + duration("PT200H")`,feelContext:'{"startingDate": "2022-09-15", "targetDate": "2022-10-05"}',metadata:{page:"challenge-5"},mdxType:"LiveFeel"}),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Solution"),(0,l.kt)("div",null,(0,l.kt)("div",null,"Zee has 11 days to arrive in Berlin."),(0,l.kt)("br",null),(0,l.kt)("pre",{title:"Expression"},'(date(targetDate) - date(startingDate) - duration("PT200H")) / duration("P1D")'))))}m.isMDXComponent=!0}}]);