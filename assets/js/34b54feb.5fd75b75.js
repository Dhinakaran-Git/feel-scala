"use strict";(self.webpackChunkfeel_scala=self.webpackChunkfeel_scala||[]).push([[2119],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>f});var r=t(7294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,l=function(e,n){if(null==e)return{};var t,r,l={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var a=r.createContext({}),s=function(e){var n=r.useContext(a),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},p=function(e){var n=s(e.components);return r.createElement(a.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,l=e.mdxType,o=e.originalType,a=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=s(t),f=l,m=d["".concat(a,".").concat(f)]||d[f]||u[f]||o;return t?r.createElement(m,c(c({ref:n},p),{},{components:t})):r.createElement(m,c({ref:n},p))}));function f(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var o=t.length,c=new Array(o);c[0]=d;var i={};for(var a in n)hasOwnProperty.call(n,a)&&(i[a]=n[a]);i.originalType=e,i.mdxType="string"==typeof e?e:l,c[1]=i;for(var s=2;s<o;s++)c[s]=t[s];return r.createElement.apply(null,c)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},6691:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>s});var r=t(7462),l=(t(7294),t(3905));const o={id:"clock-spi",title:"Clock SPI"},c=void 0,i={unversionedId:"reference/developer-guide/clock-spi",id:"version-1.11/reference/developer-guide/clock-spi",title:"Clock SPI",description:"The clock is used when accessing the current time while evaluating expressions and unary tests (e.g. the builtin function now()). By default, it uses the system clock.",source:"@site/versioned_docs/version-1.11/reference/developer-guide/feel-engine-clock-spi.md",sourceDirName:"reference/developer-guide",slug:"/reference/developer-guide/clock-spi",permalink:"/feel-scala/docs/1.11/reference/developer-guide/clock-spi",draft:!1,editUrl:"https://github.com/camunda/feel-scala/edit/master/docs/versioned_docs/version-1.11/reference/developer-guide/feel-engine-clock-spi.md",tags:[],version:"1.11",frontMatter:{id:"clock-spi",title:"Clock SPI"}},a={},s=[{value:"Implement a FEEL Engine Clock",id:"implement-a-feel-engine-clock",level:2},{value:"Register the FEEL Engine Clock",id:"register-the-feel-engine-clock",level:2}],p={toc:s};function u(e){let{components:n,...t}=e;return(0,l.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"The clock is used when accessing the current time while evaluating expressions and unary tests (e.g. the builtin function ",(0,l.kt)("inlineCode",{parentName:"p"},"now()"),"). By default, it uses the system clock. "),(0,l.kt)("p",null,"Using the SPI, the clock can be replaced by a custom one. For example, if the application uses its own and not the system clock."),(0,l.kt)("h2",{id:"implement-a-feel-engine-clock"},"Implement a FEEL Engine Clock"),(0,l.kt)("p",null,"Create a sub-class of ",(0,l.kt)("inlineCode",{parentName:"p"},"org.camunda.feel.FeelEngineClock"),". Implement the method ",(0,l.kt)("inlineCode",{parentName:"p"},"getCurrentTime()")," to return the current time. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-scala"},"class MyClock extends FeelEngineClock {\n\n  override def getCurrentTime(): ZonedDateTime = {\n    val currentMillis = ...\n    Instant.ofEpochMilli(currentMillis).atZone(ZoneId.systemDefault())\n  }\n\n}\n")),(0,l.kt)("h2",{id:"register-the-feel-engine-clock"},"Register the FEEL Engine Clock"),(0,l.kt)("p",null,"Depending on how the FEEL engine is used, the clock can be passed directly on creation, or is loaded via Java ServiceLoader mechanism. "),(0,l.kt)("p",null,"In the second case, create a new file ",(0,l.kt)("inlineCode",{parentName:"p"},"org.camunda.feel.FeelEngineClock")," in the folder ",(0,l.kt)("inlineCode",{parentName:"p"},"META-INF/services/"),". It must contain the full qualified name of the class."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"org.camunda.feel.example.MyClock\n")))}u.isMDXComponent=!0}}]);